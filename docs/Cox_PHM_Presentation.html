<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>FA23-Cox Proportional - slide deck</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Heart_transplant_coxph_v2.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Cox_PHM_Presentation.html">slide deck</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">FA23-Cox Proportional</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cox Proportional Hazards Model</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./methods.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Methods</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Results_and_Discussion_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Results and Discussion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Heart_transplant_coxph_v2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix - full code with additional commentary</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Cox_PHM_Presentation.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">slide deck</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#cox-proportional-hazard-model" id="toc-cox-proportional-hazard-model" class="nav-link active" data-scroll-target="#cox-proportional-hazard-model">Cox Proportional Hazard Model</a></li>
  <li><a href="#prior-to-cox-ph-model" id="toc-prior-to-cox-ph-model" class="nav-link" data-scroll-target="#prior-to-cox-ph-model">Prior to Cox PH Model</a></li>
  <li><a href="#example-kaplan-meier-survival-curve" id="toc-example-kaplan-meier-survival-curve" class="nav-link" data-scroll-target="#example-kaplan-meier-survival-curve">Example Kaplan-Meier Survival Curve</a></li>
  <li><a href="#cox-proportional-hazards-model" id="toc-cox-proportional-hazards-model" class="nav-link" data-scroll-target="#cox-proportional-hazards-model">Cox Proportional Hazards Model</a></li>
  <li><a href="#cox-proportional-hazards-model-1" id="toc-cox-proportional-hazards-model-1" class="nav-link" data-scroll-target="#cox-proportional-hazards-model-1">Cox Proportional Hazards Model</a></li>
  <li><a href="#cox-phm-assumptions---assumptions-in-common-with-many-other-models" id="toc-cox-phm-assumptions---assumptions-in-common-with-many-other-models" class="nav-link" data-scroll-target="#cox-phm-assumptions---assumptions-in-common-with-many-other-models">Cox PHM Assumptions - Assumptions in common with many other models</a></li>
  <li><a href="#cox-phm-assumptions---more-specific-to-this-model" id="toc-cox-phm-assumptions---more-specific-to-this-model" class="nav-link" data-scroll-target="#cox-phm-assumptions---more-specific-to-this-model">Cox PHM Assumptions - more specific to this model</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a></li>
  <li><a href="#data-examination-and-transformation" id="toc-data-examination-and-transformation" class="nav-link" data-scroll-target="#data-examination-and-transformation">Data Examination and Transformation</a></li>
  <li><a href="#data-prior-to-transformation" id="toc-data-prior-to-transformation" class="nav-link" data-scroll-target="#data-prior-to-transformation">Data prior to Transformation</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a>
  <ul class="collapse">
  <li><a href="#histogram-by-age-groups" id="toc-histogram-by-age-groups" class="nav-link" data-scroll-target="#histogram-by-age-groups">Histogram by Age Groups</a></li>
  <li><a href="#histogram-by-age-groups-1" id="toc-histogram-by-age-groups-1" class="nav-link" data-scroll-target="#histogram-by-age-groups-1">Histogram by Age Groups</a></li>
  <li><a href="#survival-ship-curve" id="toc-survival-ship-curve" class="nav-link" data-scroll-target="#survival-ship-curve">Survival ship Curve</a></li>
  </ul></li>
  <li><a href="#research-conclusion" id="toc-research-conclusion" class="nav-link" data-scroll-target="#research-conclusion">Research Conclusion</a></li>
  <li><a href="#further-research-suggestions" id="toc-further-research-suggestions" class="nav-link" data-scroll-target="#further-research-suggestions">Further Research Suggestions</a></li>
  <li><a href="#contributions-and-implications" id="toc-contributions-and-implications" class="nav-link" data-scroll-target="#contributions-and-implications">Contributions and Implications</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">slide deck</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="cox-proportional-hazard-model" class="level2">
<h2 class="anchored" data-anchor-id="cox-proportional-hazard-model">Cox Proportional Hazard Model</h2>
<div class="incremental">
<ul class="incremental">
<li><p>Developed by Sir David R Cox, a British statistician, in 1972</p></li>
<li><p>Also called Cox Regression</p></li>
<li><p>Used to investigate time to event data, e.g.&nbsp;time until patient dies, time until part malfunctions, time until decision is made, etc.</p></li>
<li><p>The field of Survival Analysis works with a lot of time to event data, and makes a lot of use of the Cox Proportional Hazards Model and its extensions</p></li>
</ul>
</div>
</section>
<section id="prior-to-cox-ph-model" class="level2">
<h2 class="anchored" data-anchor-id="prior-to-cox-ph-model">Prior to Cox PH Model</h2>
<p><strong>Log Rank Test</strong> - compares groups, testing a null hypothesis that there is no difference between groups. Limitations: ability to handle multiple variables, ability to quantify a difference between groups</p>
<p><strong>Kaplan-Meier Survival Curve</strong> - very simple to implement, graphs how many are alive in each group at what time. Limitations: ability to handle more than a few variables and any non-categorical variables, no mathematical function to describe the data, can not estimate a ratio of the hazards between groups,</p>
</section>
<section id="example-kaplan-meier-survival-curve" class="level2">
<h2 class="anchored" data-anchor-id="example-kaplan-meier-survival-curve">Example Kaplan-Meier Survival Curve</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="Cox_PHM_Presentation_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="cox-proportional-hazards-model" class="level2">
<h2 class="anchored" data-anchor-id="cox-proportional-hazards-model">Cox Proportional Hazards Model</h2>
<p><span class="math inline">\(h_0(t)\)</span> is the baseline hazard - for example what is your baseline hazard (risk, chance) of dying</p>
<p><span class="math inline">\(h(t)\)</span> is the hazard at time t for the group of interest.</p>
<p>This hazard <span class="math inline">\(h(t)\)</span> can be modeled as the baseline hazard times an exponential function describing the affect of the predictor variables <span class="math display">\[
h(t)=h_0(t) \times exp (\beta_1X_{1} + \beta_{2}X_{2} + \dots + \beta_n X_{n})
\]</span></p>
</section>
<section id="cox-proportional-hazards-model-1" class="level2">
<h2 class="anchored" data-anchor-id="cox-proportional-hazards-model-1">Cox Proportional Hazards Model</h2>
<p><span class="math display">\[ h(t)=h_0(t) \times exp (\beta_1X_{1} + \beta_{2}X_{2} + \dots + \beta_n X_{n}) \]</span></p>
<p>Dividing both sides by the baseline hazard we get the hazard ratio</p>
<p><span class="math display">\[
h(t)/h_0(t)= exp (\beta_1X_{1} + \beta_{2}X_{2} + \dots + \beta_n X_{n})
\]</span></p>
<p>Taking the natural log yields a formula that has some similarity to linear regression. The log of the hazard ratio has a linear relationship to the predictor variables.</p>
<p><span class="math display">\[
ln(h(t)/h_0(t))= \beta_1X_{1} + \beta_{2}X_{2} + \dots + \beta_n X_{n}
\]</span></p>
</section>
<section id="cox-phm-assumptions---assumptions-in-common-with-many-other-models" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="cox-phm-assumptions---assumptions-in-common-with-many-other-models">Cox PHM Assumptions - Assumptions in common with many other models</h2>
<p><strong>Linearity</strong> - model assumes the log of the hazard ratio is linearly proportional to the predictor variables. Check for this with plot of residuals, similar to how other models check for this. The methods for handling data that violates this assumption is same as it is for other forms of regression</p>
<p><strong>Observations are independent</strong> - the survival of one person is independent of the survival of another person. Example of when this may be more of an issue, less common hereditary health conditions, study participants may be related.</p>
<p><strong>Censoring is non-informative</strong> - those that are censored, example leave the study, are just as likely to experience the event, example death, as those that finish the study.</p>
</section>
<section id="cox-phm-assumptions---more-specific-to-this-model" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="cox-phm-assumptions---more-specific-to-this-model">Cox PHM Assumptions - more specific to this model</h2>
<p><strong>Proportional Hazards</strong> - model assumes the hazards are proportional.</p>
<ul>
<li><p>check this with Schoenffieldt test</p></li>
<li><p>handle violations with: stratification (we will see this in our example), or introduce time dependent parameters “(x*t)” instead of simply “x”</p></li>
</ul>
<p><strong>Independent variables are not changed over time</strong> - example people moved from one cohort of the study to another, dosage changes. If this occurs, need an extension of the Cox PHM that allows for time-dependent covariates.</p>
</section>
<section id="methods" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="methods">Methods</h2>
<ol type="1">
<li>Get familiar with the dataset.</li>
<li>Create first model - uses all the patients but only the predictor variables that are available for all the patients.</li>
<li>Create a second model - uses only the patients that received the heart transplant with the additional variable available for those patients. Does that variables inclusion improve the model?</li>
<li>Create a third model - remove the variable that had the least significant p-value in the previous models.</li>
<li>Compare the third and first model - to determine if indeed that variable can be dropped from the model.</li>
<li>Check data set meets linearity and proportional hazards assumptions - implement any methods needed to resolve assumption violations.</li>
<li>Create a fourth model that incorporates changes made to address assumption violations.</li>
<li>Extra, create a fifth model that looks at age as a category (&lt;40, 40-50, 50+) vs a continuous variable.</li>
</ol>
<p>*Note. Methods and results were very iterative, the results of one model dictated what needed to be adjusted and that a revised model needed to be calculated.</p>
</section>
<section id="data-examination-and-transformation" class="level2 smaller scrollable">
<h2 class="smaller scrollable anchored" data-anchor-id="data-examination-and-transformation">Data Examination and Transformation</h2>
<div class="incremental">
<ul class="incremental">
<li><p>Data source: Stanford University Heart Transplant Study [1]</p></li>
<li><p>Objective: To assess the potential increase in recipient lifespan through an experimental heart transplant program</p></li>
<li><p>Patient inclusion criteria: Official heart transplant candidates with an illness requiring a heart transplant for life prolongation</p></li>
<li><p>Timing of transplants: Occurrence varies from a few weeks to several months, contingent on donor heart availability</p></li>
<li><p>Status of candidates: Some candidates may show improvement during the waiting period and may no longer qualify as heart transplant candidates but are retained in the dataset as continuing candidates [1]</p></li>
<li><p>Contribution to analysis: Continuing candidates play a role in censoring data, impacting the study’s analysis and outcomes</p></li>
</ul>
</div>
<p>::: {.content-hidden when -format=“realjs”} Data for our Cox regression analysis comes from the Stanford University Heart Transplant Study [1]. The study was conducted to determine if an experimental heart transplant program may increase the lifespan of the recipient. Each patient in the program is considered an official heart transplant candidate, meaning they have an illness that will most likely need a heart transplant in order to prolong their lives. Patients heart transplant occurs between a few weeks to several months which all depends on donor heart availability. Although few candidates during the waiting period show improvement and get deselected as heart transplant candidates, they are kept in the data as continuing candidates [1]. These continuing candidates contribute to the censoring data.</p>
<p>The variables included in the Cox model as the x variable (or predictors) are accepted year, age, prior, and transplant. Accepted year was the year the patient was accepted as a heart transplant candidate and in the data these values are stored under “acceptyear”. Their age when accepted in the study is labeled “age”. Third predictor is whether or not the patient had prior surgeries with the header “prior”. Finally, transplant status, if the patient received the heart transplant or not, stored under the column name “transplant”. The criteria (y variable) are survival status “survived” weather they survived until the end of the experiment, and the number of days a patient lived for after receiving the transplant, labeled “survtime”. :::</p>
<div class="incremental">
<ul class="incremental">
<li><p>Predictors (X variables) in the Cox model:</p>
<ul class="incremental">
<li><p>Accepted year: Recorded as “acceptyear,” denoting the year a patient was accepted as a heart transplant candidate</p></li>
<li><p>Age at acceptance: Identified as “age” in the dataset, indicating the patient’s age when accepted into the study</p></li>
<li><p>Prior surgeries: Recorded under the header “prior,” indicating whether the patient had undergone prior surgeries</p></li>
<li><p>Transplant status: Recorded as “transplant,” indicating whether the patient received a heart transplant</p></li>
</ul></li>
<li><p>Criteria (Y variables) for analysis:</p>
<ul class="incremental">
<li><p>Survival status: Recorded as “survived,” denoting whether the patient survived until the conclusion of the experiment</p></li>
<li><p>Survival duration: Labeled “survtime,” indicating the number of days a patient lived after receiving the transplant</p></li>
</ul></li>
</ul>
</div>
</section>
<section id="data-prior-to-transformation" class="level2">
<h2 class="anchored" data-anchor-id="data-prior-to-transformation">Data prior to Transformation</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Head data set.png" class="img-fluid figure-img" width="580"></p>
<figcaption class="figure-caption">Table _: Summary of First 15 rows of Heart Transplant Dataset</figcaption>
</figure>
</div>
<div class="incremental">
<ul class="incremental">
<li>Variables within the data set such as: survived, prior, and transplant needed to be converted from characteristic columns to numeric columns as can be seen in table _.</li>
</ul>
</div>
<div class="cell">
<details>
<summary>Show the code for data conversion</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#load needed libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("survminer")</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survminer)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#import dataset</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>heart_transplant <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./heart_transplant.csv"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#generate numeric columns for survived, prior, and transplant from existing charachter columns</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>heart_transplant<span class="sc">$</span>survived2 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">ifelse</span>(heart_transplant<span class="sc">$</span>survived<span class="sc">==</span><span class="st">"dead"</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>heart_transplant<span class="sc">$</span>prior2 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">ifelse</span>(heart_transplant<span class="sc">$</span>prior<span class="sc">==</span><span class="st">"yes"</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>heart_transplant<span class="sc">$</span>transplant2 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">ifelse</span>(heart_transplant<span class="sc">$</span>transplant<span class="sc">==</span><span class="st">"treatment"</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>heart_transplant<span class="sc">$</span>age2 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">ifelse</span>(heart_transplant<span class="sc">$</span>age<span class="sc">&lt;</span><span class="dv">41</span>,<span class="dv">0</span>,<span class="fu">ifelse</span>(heart_transplant<span class="sc">$</span>age<span class="sc">&lt;</span><span class="dv">51</span>,<span class="dv">1</span>,<span class="dv">2</span>)))</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(heart_transplant)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="results" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="results">Results</h2>
<p>At first, modifications were required for the dataset involving the columns labeled “survived,” “prior,” and “transplant.” Subsequently, after these modifications were made, the dataset became ready for the application of the Cox PH model. The ensuing results are as follows.</p>
<section id="histogram-by-age-groups" class="level3">
<h3 class="anchored" data-anchor-id="histogram-by-age-groups">Histogram by Age Groups</h3>
<div class="incremental">
<ul class="incremental">
<li><p>Importance of age grouping:</p>
<ul class="incremental">
<li>Essential for a clearer visual representation of predominant age groups within the dataset</li>
</ul></li>
<li><p>Right-skewed Age Histogram:</p>
<ul class="incremental">
<li>Indicates a majority of study patients are over thirty years old</li>
</ul></li>
<li><p>Logic behind age distribution:</p>
<ul class="incremental">
<li>Correlates with the trend where individuals needing heart transplants typically have more heart wear</li>
</ul></li>
<li><p>Peak concentration of ages:</p>
<ul class="incremental">
<li>Highest concentration observed between 45 to 50 years old</li>
</ul></li>
</ul>
</div>
<p>Grouping patients by age was crucial to obtain a clearer visual depiction of the predominant age groups within the data. The Age Histogram exhibits a right-skewed distribution, indicating that a majority of the patients in the study are aged over thirty. This aligns logically with the fact that individuals requiring heart transplants tend to be those with more extensive wear on their hearts. The highest concentration of ages falls within the range of 45 to 50 years old.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(age, <span class="at">xlab=</span><span class="st">"Age (years)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Cox_PHM_Presentation_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>!Histogram by Age in Study</p>
</section>
<section id="histogram-by-age-groups-1" class="level3">
<h3 class="anchored" data-anchor-id="histogram-by-age-groups-1">Histogram by Age Groups</h3>
<div class="incremental">
<ul class="incremental">
<li><p>Objective: Determine the most represented age group among study patients</p></li>
<li><p>Initial histogram provided a general overview but lacked specificity</p></li>
<li><p>Second histogram created to condense broader age ranges for better insight</p></li>
<li><p>Observation from the initial histogram: Most represented age groups between 40s to mid-50s</p></li>
<li><p>Categorization in the second histogram:</p>
<ul class="incremental">
<li>Patients grouped into three categories: 40 and under, between 40-49, and 50 and over</li>
</ul></li>
<li><p>Resultant finding:</p>
<ul class="incremental">
<li>A substantial majority of patients fall within the age bracket of 40-49</li>
</ul></li>
</ul>
</div>
<p>Next, we wanted to know which age group most represented the patients in the study. The first histogram gave us a general idea, but we wanted to narrow the age group. Another histogram was generated to consolidate broader age ranges. After observing the first histogram, it became evident that the most represented age groups were within the 40s to mid-50s range. Considering this distribution, the second histogram categorized patients into three groups: 40 and under, between 40-49, and 50 and over. The outcome demonstrates that a significant majority of patients in the study belong to the age bracket of 40-49.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(age2, <span class="at">xlab=</span><span class="st">"Age (&lt;40, 40-49, 50+)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Cox_PHM_Presentation_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>!Histogram by Age Range</p>
</section>
<section id="survival-ship-curve" class="level3">
<h3 class="anchored" data-anchor-id="survival-ship-curve">Survival ship Curve</h3>
<div class="incremental">
<ul class="incremental">
<li><p>Aim: Graph survival probabilities of heart transplant recipients versus non-recipients</p></li>
<li><p>Visualization: Created a survival plot to depict post-heart transplant survivorship</p></li>
<li><p>Color representation: Teal for heart transplant recipients, red for non-recipients</p></li>
<li><p>Study participants: 99 patients examined; 32 (32.32%) did not receive a transplant, while 67 (67.67%) did</p></li>
<li><p>Initial 500 days’ outcome:</p>
<ul class="incremental">
<li><p>Non-recipients: Only 1 patient survived (1.03% survivorship without transplant)</p></li>
<li><p>Recipients: 22 patients survived (32.83% survivorship with transplant)</p></li>
</ul></li>
<li><p>Post-procedure survivorship:</p>
<ul class="incremental">
<li><p>Study conducted during the 1960s and 1970s; survivorship seems lower than anticipated</p></li>
<li><p>Analysis at 1500 days (4 years) post-surgery:</p>
<ul class="incremental">
<li><p>Recipients: Only 3 patients survived among those who had a heart transplant</p></li>
<li><p>Non-recipients: None of the 33 patients survived</p></li>
</ul></li>
<li><p>Note: Circumstances of patients’ deaths or their heart condition’s role in mortality remain unknown</p></li>
</ul></li>
</ul>
</div>
<p>Ultimately, our aim was to graph the survival probabilities of patients who underwent a heart transplant against those who did not. To illustrate the post-heart transplant survivorship, a survival plot was created. Patients who received a heart transplant were denoted in teal, whereas those who did not were indicated in red. Among the 99 patients studied, 32 (32.32%) did not receive a transplant, while 67 (67.67%) underwent this potentially life-saving procedure. Within the initial 500 days (approximately 1 year and 3 months), only 1 patient who did not receive a heart transplant remained alive, resulting in a survivorship rate without the transplant of 1.03%. Conversely, among those who received the transplant during the same timeframe, 22 patients remained alive, yielding a survivorship rate of 32.83%.</p>
<p>Overall, the post-procedure survivorship appears lower than desired, but it’s crucial to consider that this study was conducted during the 1960s and 1970s. The statistical impact becomes more striking when examining patients 1500 days (or 4 years) post-surgery or without surgery. Only 3 patients who underwent a heart transplant and none of the 33 patients who did not receive the transplant were still alive. However, it’s essential to note that the circumstances surrounding the patients’ deaths or whether their heart condition contributed to their demise remain unknown.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>all_strTrtmnt.mod <span class="ot">&lt;-</span> <span class="fu">coxph</span>(<span class="fu">Surv</span>(survtime, survived2)<span class="sc">~</span> age <span class="sc">+</span> prior2 <span class="sc">+</span> <span class="fu">strata</span>(transplant2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(<span class="fu">survfit</span>(all_strTrtmnt.mod), <span class="at">data=</span>heart_transplant, <span class="at">ggtheme =</span> <span class="fu">theme_minimal</span>(), <span class="at">conf.int=</span><span class="cn">TRUE</span>, <span class="at">risk.table=</span><span class="cn">TRUE</span>, <span class="at">tables.height =</span> <span class="fl">0.3</span>, <span class="at">tables.theme =</span> <span class="fu">theme_minimal</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Cox_PHM_Presentation_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>!Survival Plot Heart Transplant vs No Heart Transplant</p>
</section>
</section>
<section id="research-conclusion" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="research-conclusion">Research Conclusion</h2>
<div class="incremental">
<ul class="incremental">
<li><p>Heart transplantation significantly extends patients’ lives based on strong support from our study</p></li>
<li><p>Data source: Stanford Heart Transplant Study; analyzed using a survival analysis tool, Cox Regression model</p></li>
<li><p>Suitability of Cox Regression:</p>
<ul class="incremental">
<li>Ideal for time-to-event outcomes, comparing the life expectancy of patients with and without heart transplants</li>
</ul></li>
<li><p>Post-transplant longevity:</p>
<ul class="incremental">
<li>Some patients lived an additional 1-4 years post-transplant</li>
</ul></li>
</ul>
</div>
<div class="incremental">
<ul class="incremental">
<li><p>Model selection:</p>
<div class="incremental">
<ul class="incremental">
<li>Model 4 emerged as the most effective in supporting the data and generating visual representations</li>
</ul>
</div></li>
</ul>
</div>
</section>
<section id="further-research-suggestions" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="further-research-suggestions">Further Research Suggestions</h2>
<div class="incremental">
<ul class="incremental">
<li><p>Focus on age groups’ survivability post-transplant for better insights into optimal candidates</p></li>
<li><p>Allocation of donor organs: Explore which age groups benefit the most from a heart transplant for improved survival</p></li>
<li><p>Considerations for further studies:</p>
<ul class="incremental">
<li><p>Include more current data and expand sample size with additional covariates (e.g., race, sex)</p></li>
<li><p>Investigate potential differences in outcomes across various surgery centers</p>
<ul class="incremental">
<li>Analyze statistical significance between hospitals regarding surgery outcome</li>
</ul></li>
</ul></li>
</ul>
</div>
</section>
<section id="contributions-and-implications" class="level2">
<h2 class="anchored" data-anchor-id="contributions-and-implications">Contributions and Implications</h2>
<div class="incremental">
<ul class="incremental">
<li><p>Our research offers insights into the complex relationship among heart transplantation, age, and patient outcomes in cardiac healthcare</p></li>
<li><p>Vital information for healthcare workers and patients to make informed decisions about organ allocation and patient survival</p></li>
</ul>
</div>
<p>In conclusion, our research provides strong support that heart transplantation has a positive and significant impact on extending the lives of patients. The data was provided by Stanford Heart Transplant Study. With the help of a survival analysis tool: Cox Regression model. The Cox regression was best suited for this study due to the fact that it is suitable for time-to-event outcomes. In this case, how much longer does a patient live if given a heart transplant versus those who do not receive the transplant. In some cases patients post transplant lived an extra 1-4 years. The best model used to support the data and build the images was Model 3. Future research could look into which age group had best survivability post transplant. This could provide healthcare workers valuable information regarding who should get the heart transplant if there are patients in different age groups who are waiting for a new heart and which would benefit the most and survive. As we know donated organs are not easy to come by and making sure that an organ such as a heart should go to the best candidate that would live longer with that new heart. In addition, this analysis would be interesting to see with more current data and a larger sample size, with more covariates. For instance, perhaps look into race and sex and how that affects survivability. Researchers could also compare the results across different surgery centers, could there be any statistical significance between having surgery performed at one hospital vs another. In summary, our findings contribute to a deeper understanding of the complex interplay between heart transplantation, age and patient outcomes in the realm of cardiac healthcare.</p>
</section>
<section id="references" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="references">References</h2>
<p>[1] B. W. Turnbull, B. Wm. Brown Jr., and M. Hu, “Heart transplant data,” Data Sets, https://www.openintro.org/data/index.php?data=heart_transplant (accessed Nov.&nbsp;22, 2023).</p>
<p>[2] P. Schober and T. R. Vetter, “Survival analysis and interpretation of time-to-event data: The Tortoise and the hare,” Anesthesia and analgesia, <a href="https://pubmed.ncbi.nlm.nih.gov/30015653/#:~:text=Survival%20analysis%2C%20or%20more%20generally,defined%20end%20point%20of%20interest" class="uri">https://pubmed.ncbi.nlm.nih.gov/30015653/#:~:text=Survival%20analysis%2C%20or%20more%20generally,defined%20end%20point%20of%20interest</a>.&nbsp; (accessed Oct.&nbsp;7, 2023).&nbsp;</p>
<p>[3] &nbsp;D. Kumar and B. Klefsjö, “Proportional hazards model: A Review,” Reliability Engineering &amp; System Safety, <a href="https://www.sciencedirect.com/science/article/abs/pii/0951832094900108" class="uri">https://www.sciencedirect.com/science/article/abs/pii/0951832094900108</a>&nbsp; (accessed Oct.&nbsp;7, 2023).</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Heart_transplant_coxph_v2.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Appendix - full code with additional commentary</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>